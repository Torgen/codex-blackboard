<template name="logistics">
  <div class="bb-logistics">
    <section class="bb-logistics-metas">
    {{#each r in rounds}}
      {{#each m in (metas r)}}
        {{>logistics_meta round=r meta=m}}
      {{/each}}
    {{/each}}
    </section>
    {{> callins_table}}
  </div>
</template>

<template name="logistics_meta">
  {{#let p=puzzles}}
  <div class="bb-logistics-meta" style="background-color: {{color}}; --num-feeders:{{p.length}}">
    <header class="{{#if meta.solved}}solved{{else if stuck this}}stuck{{/if}}">
      <div class="round">{{round.name}}</div>
      {{meta.name}}
    </header>
    <div class="feeders">
      {{#each puzzle in p}}
        <div class="{{#if puzzle.solved}}solved{{else if stuck puzzle}}stuck{{/if}}">{{puzzle.name}}</div>
      {{/each}}
    </div>
  </div>
  {{/let}}
</template>
